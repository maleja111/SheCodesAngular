# 3. ¬øCu√°l fue el emoji? üëë

## üí° Introducci√≥n üí° 

Construiremos un juego de memoria. üß†  
  
**Tendremos:** Un bot√≥n que inicie el juego, un contador de segundos que nos dir√° cuanto tiempo hemos llevamos jugando, e inmediatamente se nos presentar√° un emoji que vamos a memorizar, paso siguiente, aparecer√° una serie de emojis en pantalla y t√∫ tendr√°s que responder si es el emoji que tenias que recordar o no, ademas celebraremos cuando identifiques exitosamente el emoji ¬°¬°Con una linda imagen de un gatito üòªüòª!!

¬øEst√°s lista?

**¬°Claro que s√≠! ¬°Ya tienes experiencia! üí™**

[**¬°Aqu√≠ puedes encontrar el demo!**](https://angular-last-emoji.stackblitz.io/)**‚Äã**

## Paso 1: Crear vista del tablero de juego **üéÆ**  <a id="paso-1-crear-el-titulo"></a>

Vamos a crear el entorno donde vamos a jugar. Para ello iremos al archivo **app.component.html** y borramos todo el contenido para adicionar lo siguiente:

{% tabs %}
{% tab title="app.component.html" %}
```markup
<div class="scoreScreen">
	<label>
    Score:
  </label>
  <label>
    {{scoreGame || 0}}
  </label>
	<label>
    / Timer:
  </label>
  <label>
    {{0}}s
  </label>
</div>

<div class="fatherScreen">
  <div class="childScreen" *ngIf='showBtnStart'>
    <button (click)="startGame()">Iniciar Juego</button>
  </div>
</div>
```
{% endtab %}
{% endtabs %}

**Deber√≠as ver algo as√≠: üëá**

![](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LVzJGInY_b4CV-AHnBA%2F-LVzVYuR-kGECRyVOEcI%2Fboard-no-styles.png?alt=media&token=ce5851cd-8e92-4893-8624-afc3aafd5d9b)

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** La etiqueta **Div** nos ayuda a definir un orden.  
  
**2.** La etiqueta **label**  es usada para contener texto.  
  
**3.** El elemento **{{}}**  es una forma de comunicar nuestro [componente](https://platzi.com/tutoriales/1153-angular/1619-que-son-los-componentes-en-angular/).   
De esta manera el **app.component.ts**, se comunica con **app.component.html,** y ****el **\|\|** dentro ****del ****elemento es una condici√≥n "o" que nos va a mostrar el n√∫mero cero mientras no exista datos en las variables.  
  
**4.** El elemento [**class**](https://css-tricks.com/almanac/selectors/c/class/)**=""** nos va a ayudar a definir los estilos de nuestra aplicaci√≥n \(no solo tiene esa utilidad, pero la usaremos para eso en el ejercicio de hoy\).  
  
 **5.** El elemento **\***[**ngIf**](https://angular.io/api/common/NgIf)**=** nos va a ayudar a ocultar o mostrar elementos, depende de la variable que tengamos asignada dentro del **\*ngIf=**, en este caso tenemos la variable **showBtnStart** donde la asignaremos en el **app.component.ts** m√°s adelante.   
  
**6.** El elemento **button** nos va a crear un bot√≥n que ser√° el que usaremos para iniciar nuestro juego.  
  
**7.** El elemento **\(click\)=""** controla el evento cuando t√∫ le des clic a √©l bot√≥n y se va a llamar la funci√≥n **startGame\(\)**.
{% endhint %}

## Paso 2: Adicionar la l√≥gica al tablero de juego üî≠ <a id="paso-1-crear-el-titulo"></a>

Ahora vamos a modificar el archivo **app.component.ts**, ****en ****este vamos a adicionar la declaraci√≥n de variables que vimos en el archivo **app.component.html** y adem√°s vamos a agregar unas funciones.  
En este archivo vamos a encontrar el siguiente c√≥digo:

![En la l&#xED;nea 10 adicionaremos el siguiente bloque de c&#xF3;digo.](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LVzi-aUJcHAy0Iw1Kzz%2F-LW-1MkNQG90twQEWSSv%2Fset-logic.png?alt=media&token=4e948abc-d93b-4571-a946-2f27634c04b1)

{% tabs %}
{% tab title="app.component.ts" %}
```typescript
  scoreGame = '';
  showBtnStart = true;

  startGame() {
    this.randomEmoji();
  }
  randomEmoji() {
  }

```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** A la variable **scoreGame** se le asigna vac√≠o, de esta manera le estamos diciendo que es [tipo](https://www.uno-de-piera.com/tipos-en-typescript/) **String**.  
  
**2.** A la variable **showBtnStart** se le asigna **true**, de esta manera le estamos diciendo que es [tipo](https://www.uno-de-piera.com/tipos-en-typescript/) **Boolean.**  
Adem√°s, cuando le asignamos **true**, en nuestro \***ngIf** de **app.component.html** deber√° mostrar todas las l√≠neas de c√≥digo que contenga √©ste, pero cuando su valor sea false ocultar√° las lineas de c√≥digo.

**3.** Creamos una funci√≥n llamada **startGame\(\)**, en esta funci√≥n adicionaremos la l√≥gica que se deber√° ejecutar cuando t√∫ le des clic al bot√≥n "Iniciar Juego".

**4.** La funci√≥n **startGame\(\)** llamar√° ****a ****su ****vez a la funci√≥n **randomEmoji\(\),** que ****analizaremos ****en ****el ****paso **5**, por eso la creamos pero la dejamos sin l√≥gica.
{% endhint %}

## Paso **3**: Agregar estilos al tablero de juego üé®üñå

¬°Vamos a hacer que nuestro tablero tenga color agregando CSS! ¬ørecuerdas las clases que usamos en nuestro **app.component.html**? ¬°llego el tiempo de usarlas!   
Reemplaza el contenido de **app.component.css** con √©ste:

{% tabs %}
{% tab title="app.component.css" %}
```css
button {  /* Afecta todas las etiquetas HTML button */
  background-color: seashell; /* Determina el color de fondo de nuestro bot√≥n */
  border: none; /* Nos elimina el borde a nuestro bot√≥n */
  border-radius: 12px; /* Hace los extremos de nuestro bot√≥n redondeados */
  padding: 16px;  /* Crea un espacio entre el borde de nuestro bot√≥n y el centro del bot√≥n */
  font-size: 20px; /* Determina el tama√±o de letra dentro de nuestro b√≥ton */
  font-weight: bold; /* Hace que nuestro texto se vea en Negrita */
  margin-right: 10px /* Crea un espacio entre el borde de nuestro bot√≥n y el exterior del mismo */
}

button:hover { /* Afecta todas las etiquetas HTML button en el momento que el cursor este sobre el */
  background: salmon; /* Determina el color de fondo de nuestro bot√≥n */
  border-style: solid; /* Nos crea un borde a nuestro bot√≥n de l√≠nea continuia */
  border-color: pink; /* Nos da un color a el borde de nuestro bot√≥n */
}

label { /* Afecta todas las etiquetas HTML label */
  white-space: nowrap; /* hace que nuestro texto no se quiebre, y se vea en una sola l√≠nea */
}
.childScreen { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  width: 120px; /* Determina el ancho de la secci√≥n */
}

.fatherScreen { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  height: 350px; /* Determina la altura de la secci√≥n */
  display: grid;  /* Define el elemento como un contenedor de cuadr√≠cula */
  justify-content: center; /* Centra los elementos horizontalmente */
  align-items: center; /* Centra los elementos verticalmente */
  background: #e9dbf1; /* Determina el color de fondo de la secci√≥n */
  border-radius: 15px; /* Hace los extremos de nuestra secci√≥n redondeados */
}

.scoreScreen { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  background: #e9dbf1;  /* Determina el color de fondo de la secci√≥n */
  border-radius: 15px; /* Hace los extremos de la secci√≥n redondeados */
  box-sizing: content-box; /* controla c√≥mo se maneja el elemento al que se aplica.
Los valores de ancho y alto se aplican al contenido, el relleno y el borde. */
  padding: 20px; /* Crea un espacio entre el borde de la secci√≥n y el centro la secci√≥n */
  margin-bottom: 8px; /* Crea un espacio entre el borde de la secci√≥n y el exterior de la misma */
  font-weight: bold; /* Hace que nuestro texto se vea en Negrita */
  font-size: 30px; /* Determina el tama√±o de letra dentro de la secci√≥n */
}
```
{% endtab %}
{% endtabs %}

¬øLuce como mucho verdad?  
Pero en cada una de las l√≠neas puedes encontrar la explicaci√≥n sobre su funcionamiento.   
Si quieres profundizar tus conocimientos en CSS, aqu√≠ te dejo una Wiki con gran cantidad de definiciones y art√≠culos. ü§ì[https://css-tricks.com/](https://css-tricks.com/).

**Deber√≠as ver algo as√≠: üëá**

![](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LW-E37f1o0ExHcYDH7q%2F-LW-FcORc0rxBoBY-h5S%2Fcolor-table.png?alt=media&token=efea2108-c8b6-4570-a53b-d5c4b08c7f5f)

## Paso 4: Crear elementos para emoji **üöß**

Llego el momento de mostrar un emoji en pantalla, este emoji nos definir√° ¬°todo el juego! con este compararemos los dem√°s emojis que saldr√°n aleatoriamente y ¬°no solo eso! pondremos un contador de 5s a 0s donde decrementar√° el tiempo en el que nos memorizaremos √©ste.  
Actualmente nuestro **app.component.html** tiene el siguiente c√≥digo, pero lo modificaremos as√≠:

![En la l&#xED;nea 20 adicionaremos lo siguiente:](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LW-Ju8MoD-wJ-TeBqA0%2F-LW-MulngMszwbSRul8f%2Fadd-emoji-principal.png?alt=media&token=6234ea52-1e09-4a03-800c-4bff769f2f97)

{% tabs %}
{% tab title="app.component.html" %}
```markup
  <div class="childScreen" *ngIf='countDownEmoji > -1 && !showBtnStart'>
    <label class='emoji'>
      {{emojiArray[emojiIndex]}}
    </label>
    <br />
    <label>
      Tendr√°s {{countDownEmoji}}s para recordar este emoji
    </label>
  </div>
```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** Utilizando la l√≠nea \***ngIf**='**countDownEmoji** &gt; -1 && !**showBtnStart**', estamos diciendo lo siguiente **‚û§** Deber√° mostrar las l√≠neas de c√≥digo que contiene solo si la variable **countDownEmoji** es ****mayor ****a ****-1, y si la variable **showBtnStart** contiene su valor en **false.**

**2.** Vamos a crear un array de emojis llamado **emojiArray** y ****seg√∫n el valor de la variable **emojiIndex**, ser√° el emoji que lograremos visualizar en pantalla para memorizar.

**3.** Tendremos una variable **countDownEmoji**, esta ser√° la encargada de permitirnos visualizar en pantalla los segundos que van a disminuir.
{% endhint %}

## Paso 5: Generaci√≥n del emoji que debemos recordar ‚è≤

¬°Ahora s√≠! vamos a hacer la l√≥gica para que nuestro emoji aparezca y se oculte a los 5s.  
Vamos a tomar nuestro archivo **app.component.ts** que ****actualmente luce as√≠, pero adicionaremos lo siguiente:

![](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LW0qdJJw-03Rlsk1vDn%2F-LW0tqTNzNZz44BuPnBL%2Fadd-generation-orincipal.png?alt=media&token=5ff5bdcc-c6ab-49ab-913c-825eafcc0009)

{% tabs %}
{% tab title="app.component.ts" %}
```typescript
  // adicionamos en la l√≠nea 12, declaraciones de variables
  countDownEmoji: number;
  emojiArray = ['üöó', 'üåå', 'üìª', 'üëª', 'üç¶', 'üëΩ', 'üëØ'];
  emojiIndex: number;
  maxNumberEmoji = this.emojiArray.length - 1;
  countDownEmojiSize = 5;

  // adicionamos en la l√≠nea 15
  this.showBtnStart = false;
  
  // adicionamos en la l√≠nea 20, las siguientes funciones
  randomEmoji() {
    this.emojiIndex = Math.round(Math.random() * this.maxNumberEmoji);
    this.startcountDownFirstEmoji();
  }

  startcountDownFirstEmoji() {
    const intervalEmoji = setInterval(() => this.intervalEmojiControl(intervalEmoji), 1000);
  }

  intervalEmojiControl(intervalEmoji) {
    this.countDownEmoji = this.countDownEmojiSize--;

    // Cuando termine el numero de segundos para recordar la imagen, se debe parar el setInterval
    if (this.countDownEmoji < 0) {
      clearInterval(intervalEmoji);
    }
  }

```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** Declaramos la variable **countDownEmoji** como tipo number, haci√©ndolo as√≠ de tipo entero y ser√° la encargada de llevar la cuenta de nuestro contador cuando este disminuya.  
  
**2.** Creamos la variable **emojiArray** √©sta ser√° la encargada de contener nuestra lista de emojis posibles.

**3.** Declaramos la variable **emojiIndex** como tipo number, haci√©ndolo as√≠ de tipo entero.   
Depende del n√∫mero que tenga ser√° la posici√≥n en el array de **emojiArray** y a su vez el emoji que podremos ver.

**4.** Creamos la variable **maxNumberEmoji** y le asignamos el valor del tama√±o de nuestro **emojiArray** menos 1, esto es porque vamos a generar un n√∫mero random para que sea diferente cada vez y nuestro array inicia en 0, as√≠ que si tenemos un array de 7 posiciones, el valor m√°ximo que podr√≠amos seleccionar seria 6.

**5.** Creamos la variable **countDownEmojiSize**, esta variable nos ayudar√° a definir cu√°ntos segundos vamos a esperar para memorizarnos el emoji.

**6.** Asignamos a la variable **showBtnStart** con el valor false para que desaparezca de la pantalla y permita la visualizaci√≥n del emoji que debemos memorizar.

**7.** En la funci√≥n **randomEmoji\(\)** generaremos un n√∫mero [random](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random) de 0 a 6 \(**emojiArray** tiene 7 posiciones\) y lo asignaremos a **emojiIndex**, con esto procedemos a llamar la funci√≥n que se encargara de llamarse cada segundo.

**8.** En la funci√≥n **startcountDownFirstEmoji\(\)** nos encargaremos de llamar la funci√≥n que nos va a decrementar el contador cada segundo con un [**setInterval**](https://css-tricks.com/snippets/javascript/intervals/). ****√âsta funci√≥n ejecuta en intervalos espec√≠ficos de tiempo \(en milisegundos\) una funci√≥n o las l√≠neas de c√≥digo que tenga asignadas.   
El m√©todo **setInterval\(\)** se continuar√° llamando hasta que se llame la funci√≥n **clearInterval\(\)** o se cierre la ventana.   
La funci√≥n clearInterval la explicaremos m√°s adelante.

**9.** Creamos la funci√≥n **intervalEmojiControl\(\)** √©sta recibe como par√°metro una variable llamada **intervalEmoji** que almacena todo el **setInterval**, esto nos ayudar√° a detenerlo cuando la variable **countDownEmoji** sea menor a 0 con la funci√≥n [**clearInterval**](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval)**\(\),** √©sta borra el intervalo establecido por la funci√≥n setInterval\(\) y esto hace que el contenido de la funci√≥n **setInterval\(\)** no se ejecute nunca m√°s.
{% endhint %}

## Paso 6: Agregar estilos al emoji a recordar üé®üñå

Vamos a hacer que nuestro emoji resalte agregando un poco de CSS. Adiciona en **app.component.css** lo siguiente:

{% tabs %}
{% tab title="app.component.css" %}
```css
.emoji { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
  font-size: 100px; /* Determina el tama√±o de letra dentro de la secci√≥n */
}
```
{% endtab %}
{% endtabs %}

**Deber√≠as ver algo as√≠: üëá**

![Deber&#xED;as ver como el valor en segundos desciende.](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LW11gQeFfckZmm5yF2q%2F-LW15BRj_6W_Q3XEAsas%2Fmemorizar-emoji.png?alt=media&token=62b65c6f-46da-47eb-83cf-72bce52ffcde)

## Paso 7: Crear elementos para comparar el primer emoji **üîé** <a id="paso-4-crear-elementos-para-emoji"></a>

¬°Vas muy bien! ya tenemos el emoji que debemos memorizar y desaparece a los 5s. Ahora vamos a hacer que aparezcan emojis random de nuestra lista de emojis y responder un "Si" o "No" dependiendo si √©l emoji que se nos presenta es el esperado.  
Para esto en el archivo **app.component.html** vamos a encontrar el siguiente c√≥digo:

![En la l&#xED;nea 31 adicionaremos lo siguiente:](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LW15k8_mD_OWHhWQVOR%2F-LW17ptM7KQ5LiyzgBNh%2Fcrear-elementos-compare.png?alt=media&token=e591e2a7-1ec5-40cc-b972-be70e5b8991e)

{% tabs %}
{% tab title="app.component.html" %}
```markup
<div *ngIf='emojiAskIndex >= 0 && !youWin'>
  <label class='emoji'>
    {{emojiArray[emojiAskIndex]}}
  </label>
  <label>
    ¬øeste es tu emoji?
  </label>
  <br />
  <button class="childScreen" (click)="compareAnswer('YES')">Si</button>
  <button class="childScreen" (click)="compareAnswer('NO')">No</button>
</div>

```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** En la condici√≥n \***ngIf**='**emojiAskIndex** &gt;= 0 && !**youWin**' estamos diciendo lo siguiente **‚û§** Deber√° mostrar las l√≠neas de c√≥digo que contiene solo si la variable **emojiAskIndex** es ****mayor o igual a 0 y si la variable **youWin** contiene su valor en **false.  
  
2.** Tenemos un array de emojis almacenados en **emojiArray** y ****seg√∫n el valor de la variable **emojiAskIndex**, ser√° el emoji que lograremos visualizar en pantalla para decir si es nuestro emoji o no.

**2.** Tambi√©n tendremos 2 botones, cada uno mediante el evento clic llama a la misma funci√≥n pero le enviar√° valores diferentes.
{% endhint %}

## Paso 8: Generaci√≥n de elementos para comparar **üî¶**

Adicionaremos la l√≥gica que nos generar√° de manera random los emojis a comparar y la funci√≥n a donde ir√°n nuestras respuestas de si/no. Haci√©ndonos acumular ‚úÖo ‚ùåen nuestro score dependiendo de nuestra respuesta.  
En caso de no ser el emoji correcto llamaremos una funci√≥n que nos generar√° otro emoji random para comparar.  
El **app.component.ts** actualmente luce as√≠, pero adicionaremos lo siguiente:

![](https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LUWGcQjUBhtPBMOEH77%2F-LW1AcYU4tSCj6fpBSLs%2F-LW1CS-MGTTJAf-h9LTp%2Fcompare1.png?alt=media&token=d220d22d-c140-40c2-9480-385c309b284e)

![](../.gitbook/assets/its-your.png)

![](../.gitbook/assets/compare-result.png)

{% tabs %}
{% tab title="app.component.ts" %}
```typescript
// adicionamos en la l√≠nea 17
emojiAskIndex: number;
youWin = false;

// adicionamos en la l√≠nea 40
this.thisIsYourEmoji();

// adicionamos en la l√≠nea 43
  compareAnswer(answer) {
    switch (answer) {
      case 'YES':
        if (this.emojiIndex === this.emojiAskIndex) {
          this.scoreGame = this.scoreGame + '‚úÖ';
        } else {
          this.scoreGame = this.scoreGame + '‚ùå';
        }
        break;
      case 'NO':
        if (this.emojiIndex !== this.emojiAskIndex) {
          this.scoreGame = this.scoreGame + '‚úÖ';
          this.thisIsYourEmoji();
        } else {
          this.scoreGame = this.scoreGame + '‚ùå';
        }
        break;
    }
  }

  thisIsYourEmoji() {
    this.emojiAskIndex = Math.round(Math.random() * this.maxNumberEmoji);
  }

```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** Declaramos la variable **emojiAskIndex** como tipo number, haci√©ndolo as√≠ de tipo entero.   
Depende del n√∫mero que tenga asignado, este ser√° la posici√≥n en el array de **emojiArray** y a su vez el emoji qu√© podremos comparar.

**2.** Declaramos la variable **youWin** en **false** porque ser√° la variable que nos ayudar√° a controlar cuando el usuario gane, mientras se mantenga en false el usuario a√∫n no habr√° ganado.

**3.** Esta funci√≥n **compareAnswer\(\)** ser√° la encargada de administrar nuestra respuesta, recibir√° como par√°metro la variable **answer** que tendr√° el valor 'YES'/'NO', mediante un [**switch**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch) compararemos si el actual emoji es igual o diferente al que debemos memorizar y adicionar al score una ‚úÖ en caso de respuesta correcta y ‚ùå en caso de respuesta incorrecta.

**4.** ¬øQu√© es un [**switch**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch)? Se utiliza para agilizar la toma de decisiones m√∫ltiples; trabaja de la misma manera que lo hace un if, en nuestro caso el **case: 'YES'** es como si tuvi√©ramos un **if \(answer === 'YES'\)** y **case:'NO'** es como si tuvi√©ramos un **if \(answer === 'NO'\)**.

**5.** Esta funci√≥n **thisIsYourEmoji\(\)** tiene la responsabilidad de generarnos un nuevo **emojiAskIndex** de manera random cuando el actual emoji no es el correcto.   
Cada vez que un emoji presentado en pantalla no sea el emoji para memorizar y confirmemos con nuestra respuesta que no es el esperado, podremos visualizar un siguiente emoji gracias a esta funci√≥n.
{% endhint %}

**Deber√≠as ver algo as√≠: üëá**

![En cuanto le des clic a un bot&#xF3;n deber&#xED;as ver la respuesta en el score.](../.gitbook/assets/compre-result-style.png)

## Paso **9**: Adicionar mensaje ganador üèÜ

Vamos a adicionarle un mensaje que salga cuando respondas correctamente identificando entre los emojis random el emoji correcto a memorizar.  
Actualmente nuestro **app.component.html** tiene el siguiente c√≥digo, pero vamos a adicionar lo siguiente:

![En la l&#xED;nea 42 adicionaremos lo siguiente:](../.gitbook/assets/add-mensaje.png)

{% tabs %}
{% tab title="app.component.html" %}
```markup
  <div *ngIf='youWin'>
    <label class='youWinText'>
      ¬°Lo lograste!
    </label>
    <br />
    <img *ngIf='catURL' [src]="catURL" alt="Image Cat" />
  </div>
```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** En la condici√≥n \***ngIf**='**youWin**' estamos diciendo lo siguiente **‚û§** Deber√° mostrar las l√≠neas de c√≥digo que contiene solo si la variable **youWin** contiene su valor en **true.  
  
2.** Adicionaremos la etiqueta **img** que hace referencia a la utilizaci√≥n de im√°genes, gracias a esta etiqueta podremos visualizar una imagen de un lindo gatito üòªüòª.

**3.** En la condici√≥n \***ngIf**='**catURL**' estamos diciendo lo siguiente **‚û§** Deber√° mostrar las l√≠nea de c√≥digo que contiene la imagen solo si la variable **catURL** contiene un valor diferente a vac√≠o, dado que aqu√≠ se almacena la URL de la imagen del gatito.

**4.** En la estructura **\[src\]**="**catURL**" estamos diciendo lo siguiente ‚û§ El valor que contenga la variable **catURL** ser√° la propiedad **src** de nuestra etiqueta **img** y de esta manera podremos visualizar la imagen de nuestro gatito. üéâ
{% endhint %}

## Paso 10: Mensaje finalizaci√≥n del juego üìÉ

¬°Vamos a adicionar la l√≥gica para mostrar el mensaje cuando ganes!   
Ahora vamos a modificar el archivo **app.component.ts**, en este archivo vamos a adicionar las funciones necesarias para que podamos visualizar el mensaje de √©xito cuando efectivamente le demos clic al emoji que deb√≠amos memorizar.  
Actualmente nuestro **app.component.ts** tiene el siguiente c√≥digo, pero vamos a adicionar lo siguiente:

![this.finishGame\(\) se llamara cuando el emoji a memorizar sea igual con el actual.](../.gitbook/assets/fin-component1.png)

![](../.gitbook/assets/fin-componente2.png)

{% tabs %}
{% tab title=" app.component.ts" %}
```typescript
// adicionamos en la l√≠nea 49
this.finishGame();

// adicionamos en la l√≠nea 70
finishGame() {
    this.youWin = true;
  }

```
{% endtab %}
{% endtabs %}

## Paso 11: Crear servicio retornar imagen gatito üì∑

¬°Estas a punto de terminar! ¬øQu√© tal si hacemos algo nuevo?  
Vamos a crear una nueva carpeta llamada **services** y dentro de esta carpeta adicionaremos un archivo llamado **cats.service.ts**, este archivo ser√° nuestro servicio.  B√°sicamente un servicio es un proveedor de datos que mantiene l√≥gica de acceso a los datos que no est√°n dentro de nuestra aplicaci√≥n. El servicio ser√° consumido por nuestro componente **app.component.ts**, que dar√° al servicio la responsabilidad de acceder a la informaci√≥n para que el componente pueda disponer de los datos.

**Debes hacer algo as√≠: üëá**

![](../.gitbook/assets/add-services-files.gif)

Ahora en nuestro nuevo archivo **cats.service.ts** adicionaremos esto:

```typescript
import { HttpClient, HttpErrorResponse } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable, throwError as observableThrowError } from 'rxjs';
import { catchError } from 'rxjs/operators';


@Injectable({
  providedIn: 'root'
})
export class CatsService {
    APIUrl: string = 'https://api.thecatapi.com/v1/images/search';

  constructor(private http: HttpClient) { }

  getImage() {
    return this.http
      .get<Array<{}>>(this.APIUrl)
      .pipe(data => data, catchError(this.handleError));
  }

  private handleError(res: HttpErrorResponse | any) {
    console.error(res.error || res.body.error);
    return observableThrowError(res.error || 'Server error');
  }
}
```

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** La importaci√≥n de la funci√≥n [**HttpClient**](https://angular.io/guide/http) permite realizar el llamado [HTTP](https://developer.mozilla.org/es/docs/Web/HTTP/Methods) para acceder a la [**API**](https://www.abc.es/tecnologia/consultorio/20150216/abci--201502132105.html) donde est√°n las im√°genes de los gatitos y [**HttpErrorResponse**](https://angular.io/api/common/http/HttpErrorResponse) nos ayuda a controlar los errores que puedan llegar a pasar.

**2.** La importaci√≥n de la funci√≥n **Injectable** nos permite usar el [**decorator**](https://angular.io/tutorial/toh-pt4#injectable-services) para determinar √©ste como un servicio.

**3.** La importaci√≥n de las funciones **Observable**, **throwError** y **observableThrowError** nos ayudan a manejar las respuesta que se obtienen de la API. Nosotros recibimos la respuesta como un Observable y la manipulamos en nuestro componente para volverla un array con la subscripci√≥n, ya veremos eso mas adelante cuando adicionemos el llamado en **app.component.ts**.

**4.** La variable **APIUrl** nos almacenara la **URL** de la imagen de los gatitos.

**5.** El c√≥digo **constructor** \(private **http**: **HttpClient**\) { } es la creaci√≥n de una funci√≥n que se ejecutara siempre al inicio, como su nombre lo indica construye los valores y funciones iniciales que deben ser llamados para el correcto funcionamiento del servicio, declarando dentro de √©l la variable **http** para poder realizar el llamado HTTP.

**6.** La funci√≥n **getImage\(\)** se encargar√° de lanzar el llamado [**GET**](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET) para obtener la URL de los gatitos.

**7.** La funci√≥n **handleError\(\)** se encargara de administrar cualquier error que ocurra cuando se lanza la petici√≥n **HTTP**.
{% endhint %}

Ahora vamos a modificar un archivo que no hab√≠amos tocado el d√≠a de hoy, se llama **app.module.ts** y vamos a importar la funci√≥n **HttpClientModule** que nos permitir√° hacer los llamados **HTTP** coloc√°ndolo aqu√≠ podr√° ser usado en toda nuestra aplicaci√≥n.   
Si tuvi√©ramos m√°s de un componente ¬°todos podr√≠an acceder a √©l!  
Actualmente nuestro **app.module.ts** tiene el siguiente c√≥digo, pero vamos a adicionar lo siguiente:

![](../.gitbook/assets/screen-shot-2019-01-18-at-3.13.19-pm.png)

{% tabs %}
{% tab title="app.module.ts" %}
```typescript
// adicionamos en la l√≠nea 4
// Realizar llamados Http y va en imports
import { HttpClientModule } from '@angular/common/http';

// Reemplazar la l√≠nea imports, por la siguiente.
  imports:      [ BrowserModule, FormsModule, HttpClientModule ],

```
{% endtab %}
{% endtabs %}

**Deber√≠as ver algo as√≠: üëá**

![](../.gitbook/assets/screen-shot-2019-01-18-at-3.15.49-pm.png)

## Paso 12: Utilizar el servicio para retornar gatito üê±

¬°El √∫ltimo paso guiado!  
El servicio ser√° consumido por nuestro componente **app.component.ts** as√≠ que vamos a llamarlo de la siguiente manera.  
Actualmente nuestro **app.component.ts** tiene el siguiente c√≥digo, pero vamos a adicionar el siguiente:

![](../.gitbook/assets/final1.png)

![](../.gitbook/assets/final2.png)

{% tabs %}
{% tab title="app.component.ts" %}
```typescript
// adicionamos en la l√≠nea 2
// Servicio
import { CatsService } from './services/cats.service';

// adicionamos en la l√≠nea 21
catURL = '';
constructor(private catsService: CatsService) { }

// adicionamos en la l√≠nea 77
this.getCatImage();

// adicionamos en la l√≠nea 80
getCatImage(): void {
  this.catsService
    .getImage()
    .subscribe(
   resultQuestion => this.catURL = resultQuestion[0].url,
    error => (console.log('Ups! we have an error: ', error))
    )
}
```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
**Por si tienes alguna duda. Aqu√≠ te explicamos c√≥mo funciona: üë∑‚Äç‚ôÄÔ∏è**

**1.** Importamos el servicio **CatsService** para poder usarlo dentro del componente.

**2.** Creamos una funci√≥n constructor que nos creara la variable **catsService** para poder utilizar el servicio dentro del componente.

**3.**La funci√≥n **getCatImage\(\)** se encargar√° de lanzar el llamado a nuestra **API** que se comunicar√° con √©l **service** y nos suscribiremos a ese llamado para resolver el observable que el servicio nos devolver√°, obteniendo la **URL** de los gatitos.
{% endhint %}

**Toques finales: üëá**  
Vamos a adicionar estos estilos en nuestro **app.component.css** para ****que ****todo se vea aun mejor cuando ganes.

{% tabs %}
{% tab title="app.component.css" %}
```css
.youWinText { /* El . hace referencia a una clase, as√≠ que va a afectar todos los elementos HTML con esta clase */
    font-size: 60px; /* Determina el tama√±o de letra dentro de la secci√≥n */
    color: steelblue; /* Determina el color del texto en la secci√≥n */
}

img { /* Afecta todas las etiquetas HTML img */
  width: 250px; /* Determina el ancho de nuestra imagen */
  height: 250px; /* Determina la altura de nuestra imagen */
}
```
{% endtab %}
{% endtabs %}

**Deber√≠as ver algo as√≠: üëá**

![](../.gitbook/assets/lo-lograste.gif)

## üòé Tu Misi√≥n üòé

Parece que nuestra aplicaci√≥n est√° lista excepto por un peque√±o detalle üòµ. No est√° mostrando el **Timer,** este es el encargado de mostrar el tiempo transcurrido en segundos del juego.

‚≠êÔ∏è Utiliza lo que ya conoces como: **data** [**binding**](https://alligator.io/angular/data-binding-angular/)**,**  [**setInterval**](https://css-tricks.com/snippets/javascript/intervals/), ****[**clearInterval**](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval) ****y as√≠ como decrementamos la variable en **countDownEmoji** deber√°s crear una variable que ahora **incremente** cada segundo.

**üí™üí™**¬°¬°Felicitaciones!! ¬°Llegaste muy lejos y apenas termines el score habr√°s terminado todos los desaf√≠os! **üí™üí™**

{% hint style="info" %}
\*\*\*\*[**Aqu√≠**](https://stackblitz.com/edit/angular-last-emoji) puedes encontrar el ejercicio resuelto.
{% endhint %}

## üéâ ¬°**LO LOGRASTE!** üéâ

{% hint style="info" %}
**Nota:**

Si necesitas mentor√≠a con este ejercicio puedes contactar a:

Alejandra Giraldo  
Twitter: @maleja111  
Correo: magiraldodevelop@gmail.com
{% endhint %}

